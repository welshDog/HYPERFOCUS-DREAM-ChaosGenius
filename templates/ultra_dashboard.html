<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üî• ULTRA AUTO-HELP PARTY DASHBOARD üî•</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .dashboard-container {
      padding: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.05);
      }

      100% {
        transform: scale(1);
      }
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .control-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .control-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease;
    }

    .control-card:hover {
      transform: translateY(-5px);
    }

    .control-card h3 {
      margin-bottom: 15px;
      font-size: 1.3rem;
    }

    .btn {
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
      border: none;
      color: white;
      padding: 12px 24px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      margin: 5px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .btn.success {
      background: linear-gradient(45deg, #00b894, #55a3ff);
    }

    .btn.warning {
      background: linear-gradient(45deg, #fdcb6e, #e17055);
    }

    .btn.danger {
      background: linear-gradient(45deg, #d63031, #74b9ff);
    }

    .status-display {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 15px;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
    }

    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .status-active {
      background: #00b894;
    }

    .status-inactive {
      background: #d63031;
    }

    .status-party {
      background: #fdcb6e;
      animation: blink 1s infinite;
    }

    @keyframes blink {

      0%,
      50% {
        opacity: 1;
      }

      51%,
      100% {
        opacity: 0.3;
      }
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      padding: 15px;
      text-align: center;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .log-container {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 10px;
      padding: 20px;
      margin-top: 30px;
      max-height: 300px;
      overflow-y: auto;
    }

    .log-entry {
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
    }

    .log-success {
      color: #00b894;
    }

    .log-warning {
      color: #fdcb6e;
    }

    .log-error {
      color: #d63031;
    }

    .log-info {
      color: #74b9ff;
    }

    .party-mode {
      animation: partyColors 2s infinite;
    }

    @keyframes partyColors {
      0% {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      25% {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      50% {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }

      75% {
        background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      }

      100% {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
    }
  </style>
</head>

<body>
  <div class="dashboard-container">
    <div class="header">
      <h1>üî•üíªüéØ ULTRA AUTO-HELP PARTY DASHBOARD üéØüíªüî•</h1>
      <p>üåü Real-Time Command Center for the Ultimate Work-Help-Party Cycle! üåü</p>
    </div>

    <div class="control-panel">
      <!-- System Control -->
      <div class="control-card">
        <h3>üöÄ System Control</h3>
        <div class="status-display" id="systemStatus">
          <span class="status-indicator status-inactive"></span>
          System Status: Inactive
        </div>
        <button class="btn success" onclick="startSystem()">Start Ultra System</button>
        <button class="btn danger" onclick="stopSystem()">Stop System</button>
        <div style="margin-top: 10px;">
          <label for="partyDuration">Party Duration (minutes):</label>
          <input type="number" id="partyDuration" value="5" min="1" max="60"
            style="margin-left: 10px; padding: 5px; border-radius: 5px; border: none;">
        </div>
      </div>

      <!-- Work Session Control -->
      <div class="control-card">
        <h3>üîç Work Session Control</h3>
        <div class="status-display" id="workStatus">
          <span class="status-indicator status-inactive"></span>
          Work Detection: Standby
        </div>
        <button class="btn warning" onclick="triggerWorkSession()">Trigger Work Session</button>
        <button class="btn success" onclick="summonAgents()">Summon All Agents</button>
      </div>

      <!-- Party Control -->
      <div class="control-card">
        <h3>üéâ Party Control</h3>
        <div class="status-display" id="partyStatus">
          <span class="status-indicator status-inactive"></span>
          Party Mode: Inactive
        </div>
        <button class="btn success" onclick="startParty()">Start Epic Party</button>
        <button class="btn warning" onclick="stopParty()">End Party</button>
      </div>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" id="totalWorkSessions">0</div>
        <div>Work Sessions</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalParties">0</div>
        <div>Epic Parties</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalAgentSummons">0</div>
        <div>Agent Summons</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="systemUptime">0h 0m</div>
        <div>System Uptime</div>
      </div>
    </div>

    <!-- Activity Log -->
    <div class="log-container">
      <h3>üìã Activity Log</h3>
      <div id="activityLog">
        <div class="log-entry log-info">üéØ Ultra Dashboard initialized - Ready for action!</div>
      </div>
    </div>
  </div>

  <script>
    let systemStartTime = null;
    let statusUpdateInterval = null;

    // Initialize dashboard
    document.addEventListener('DOMContentLoaded', function () {
      updateSystemStatus();
      startStatusUpdates();
      addLogEntry('üéØ Ultra Dashboard loaded successfully!', 'info');
    });

    function startStatusUpdates() {
      if (statusUpdateInterval) clearInterval(statusUpdateInterval);
      statusUpdateInterval = setInterval(updateSystemStatus, 3000);
    }

    async function updateSystemStatus() {
      try {
        const response = await fetch('/api/system/status');
        const data = await response.json();

        if (data.error) {
          updateStatusDisplay('systemStatus', false, 'System Error: ' + data.error);
          return;
        }

        // Update system status
        const isActive = data.system_active || false;
        updateStatusDisplay('systemStatus', isActive,
          isActive ? 'System Active - Monitoring for work!' : 'System Inactive');

        // Update work status
        const workActive = data.work_session_active || false;
        updateStatusDisplay('workStatus', workActive,
          workActive ? 'Work Session Active - Agents helping!' : 'Work Detection: Standby');

        // Update party status
        const partyActive = data.party_mode_active || false;
        updateStatusDisplay('partyStatus', partyActive,
          partyActive ? 'PARTY MODE ACTIVE! üéâ' : 'Party Mode: Inactive');

        // Update party mode visual effect
        if (partyActive) {
          document.body.classList.add('party-mode');
        } else {
          document.body.classList.remove('party-mode');
        }

        // Update statistics
        updateStatistics(data);

      } catch (error) {
        console.error('Status update failed:', error);
        addLogEntry('‚ùå Failed to update system status', 'error');
      }
    }

    function updateStatusDisplay(elementId, isActive, message) {
      const element = document.getElementById(elementId);
      const indicator = element.querySelector('.status-indicator');

      if (isActive) {
        if (elementId === 'partyStatus') {
          indicator.className = 'status-indicator status-party';
        } else {
          indicator.className = 'status-indicator status-active';
        }
      } else {
        indicator.className = 'status-indicator status-inactive';
      }

      element.innerHTML = `<span class="${indicator.className}"></span>${message}`;
    }

    function updateStatistics(data) {
      // Update basic stats from status data
      if (data.total_work_sessions !== undefined) {
        document.getElementById('totalWorkSessions').textContent = data.total_work_sessions;
      }
      if (data.total_parties !== undefined) {
        document.getElementById('totalParties').textContent = data.total_parties;
      }
      if (data.total_agent_summons !== undefined) {
        document.getElementById('totalAgentSummons').textContent = data.total_agent_summons;
      }

      // Update uptime
      if (systemStartTime && data.system_active) {
        const uptime = Date.now() - systemStartTime;
        const hours = Math.floor(uptime / (1000 * 60 * 60));
        const minutes = Math.floor((uptime % (1000 * 60 * 60)) / (1000 * 60));
        document.getElementById('systemUptime').textContent = `${hours}h ${minutes}m`;
      } else if (!data.system_active) {
        document.getElementById('systemUptime').textContent = '0h 0m';
      }
    }

    async function startSystem() {
      const partyDuration = document.getElementById('partyDuration').value;
      addLogEntry('üöÄ Starting Ultra System...', 'info');

      try {
        const response = await fetch('/api/system/start', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({party_duration_minutes: parseInt(partyDuration)})
        });

        const data = await response.json();
        if (data.success) {
          systemStartTime = Date.now();
          addLogEntry('‚úÖ ' + data.message, 'success');
        } else {
          addLogEntry('‚ùå ' + data.error, 'error');
        }
      } catch (error) {
        addLogEntry('‚ùå Failed to start system: ' + error.message, 'error');
      }
    }

    async function stopSystem() {
      addLogEntry('üõë Stopping Ultra System...', 'info');

      try {
        const response = await fetch('/api/system/stop', {method: 'POST'});
        const data = await response.json();

        if (data.success) {
          systemStartTime = null;
          addLogEntry('‚úÖ ' + data.message, 'success');
        } else {
          addLogEntry('‚ùå ' + data.error, 'error');
        }
      } catch (error) {
        addLogEntry('‚ùå Failed to stop system: ' + error.message, 'error');
      }
    }

    async function triggerWorkSession() {
      addLogEntry('üîç Triggering work session...', 'info');

      try {
        const response = await fetch('/api/work/trigger', {method: 'POST'});
        const data = await response.json();

        if (data.success) {
          addLogEntry('‚úÖ ' + data.message, 'success');
        } else {
          addLogEntry('‚ùå ' + data.error, 'error');
        }
      } catch (error) {
        addLogEntry('‚ùå Failed to trigger work session: ' + error.message, 'error');
      }
    }

    async function startParty() {
      addLogEntry('üéâ Starting epic party...', 'info');

      try {
        const response = await fetch('/api/party/start', {method: 'POST'});
        const data = await response.json();

        if (data.success) {
          addLogEntry('‚úÖ ' + data.message, 'success');
        } else {
          addLogEntry('‚ùå ' + data.error, 'error');
        }
      } catch (error) {
        addLogEntry('‚ùå Failed to start party: ' + error.message, 'error');
      }
    }

    async function stopParty() {
      addLogEntry('üéØ Ending party...', 'info');

      try {
        const response = await fetch('/api/party/stop', {method: 'POST'});
        const data = await response.json();

        if (data.success) {
          addLogEntry('‚úÖ ' + data.message, 'success');
        } else {
          addLogEntry('‚ùå ' + data.error, 'error');
        }
      } catch (error) {
        addLogEntry('‚ùå Failed to stop party: ' + error.message, 'error');
      }
    }

    async function summonAgents() {
      addLogEntry('ü§ñ Summoning all agents...', 'info');

      try {
        const response = await fetch('/api/agents/summon', {method: 'POST'});
        const data = await response.json();

        if (data.success) {
          addLogEntry('‚úÖ ' + data.message, 'success');
        } else {
          addLogEntry('‚ùå ' + data.error, 'error');
        }
      } catch (error) {
        addLogEntry('‚ùå Failed to summon agents: ' + error.message, 'error');
      }
    }

    function addLogEntry(message, type = 'info') {
      const logContainer = document.getElementById('activityLog');
      const timestamp = new Date().toLocaleTimeString();
      const entry = document.createElement('div');
      entry.className = `log-entry log-${type}`;
      entry.textContent = `[${timestamp}] ${message}`;

      logContainer.appendChild(entry);
      logContainer.scrollTop = logContainer.scrollHeight;

      // Keep only last 50 entries
      while (logContainer.children.length > 50) {
        logContainer.removeChild(logContainer.firstChild);
      }
    }
  </script>
</body>

</html>